{
  "taskId": "P360-43",
  "projectKey": "P360",
  "language": "node",
  "securityLevel": "medium",
  "dataSensitivity": "internal",
  "timestamp": "2025-06-12T15:12:01.335Z",
  "files": [
    "src/config/security.js",
    "src/middleware/auth.js",
    "src/controllers/apiController.js",
    "src/routes/api.js",
    "src/services/dataService.js",
    "src/utils/logger.js"
  ],
  "prompt": "You are an expert software developer tasked with implementing high-quality code for a Jira task.\n\nTASK DETAILS:\nTask ID: P360-43\nSummary: P360 sample business requirement task\nDescription: Create a order management API where itBackground\n\nThe customer service team currently receives feedback through a web form, but has no automated way to be notified when urgent issues are reported. Team members must regularly check the system, causing delays in addressing time-sensitive customer concerns.\n\nh2. Business Requirement\n\nCreate a notification system that alerts the appropriate customer service team member when customer feedback requiring immediate attention is submitted.\n\nh2. Key Features\n\n# Automatically analyze incoming feedback for urgent keywords or negative sentiment\n# Route notifications to the appropriate team member based on the feedback category\n# Allow team members to acknowledge receipt of notifications\n# Provide a simple dashboard showing pending and acknowledged urgent feedback\n\nh2. Success Criteria\n\n* Urgent feedback notifications are sent within 2 minutes of submission\n* Team members acknowledge receipt of 95% of urgent notifications within 15 minutes during business hours\n* Customer satisfaction for urgent issues improves by 10% within three months is fetching \nStatus: To Do\nPriority: Medium\n\nTECHNICAL REQUIREMENTS:\nLanguage: node\nSecurity Level: medium\nAuthentication Method: jwt\nData Sensitivity: internal\n\n\n\n\n\n\n\nPROJECT STRUCTURE TEMPLATE: \nThis template MUST be strictly followed for your implementation. Reference this structure for all file paths and organization:\n# Node.js Project Structure Template\n\n## Project Structure\n```\nproject/\n├── src/\n│   ├── controllers/         # API controllers\n│   │   ├── authController.js\n│   │   ├── userController.js\n│   │   └── apiController.js\n│   ├── models/             # Data models\n│   │   ├── user.js\n│   │   └── index.js\n│   ├── routes/             # API routes\n│   │   ├── auth.js\n│   │   ├── user.js\n│   │   └── index.js\n│   ├── services/           # Business logic\n│   │   ├── authService.js\n│   │   ├── userService.js\n│   │   └── dataService.js\n│   ├── middleware/         # Custom middleware\n│   │   ├── auth.js\n│   │   ├── error.js\n│   │   └── validation.js\n│   ├── config/             # Configuration files\n│   │   ├── security.js\n│   │   ├── database.js\n│   │   └── index.js\n│   ├── utils/              # Utility functions\n│   │   ├── logger.js\n│   │   ├── validator.js\n│   │   └── encryption.js\n│   └── index.js            # Application entry point\n├── tests/                  # Test files\n│   ├── controllers/\n│   ├── services/\n│   └── utils/\n├── package.json            # Project dependencies\n└── README.md              # Project documentation\n```\n\n## Required Files\n\n### 1. src/config/security.js\n```javascript\n// Security configuration\nmodule.exports = {\n    jwtSecret: process.env.JWT_SECRET,\n    jwtExpiration: '1h',\n    bcryptSaltRounds: 10,\n    corsOptions: {\n        origin: process.env.ALLOWED_ORIGINS,\n        methods: ['GET', 'POST', 'PUT', 'DELETE'],\n        allowedHeaders: ['Content-Type', 'Authorization']\n    }\n};\n```\n\n### 2. src/middleware/auth.js\n```javascript\n// JWT authentication middleware\nconst jwt = require('jsonwebtoken');\nconst config = require('../config/security');\n\nmodule.exports = (req, res, next) => {\n    const token = req.headers.authorization?.split(' ')[1];\n    if (!token) return res.status(401).json({ error: 'No token provided' });\n\n    try {\n        const decoded = jwt.verify(token, config.jwtSecret);\n        req.user = decoded;\n        next();\n    } catch (error) {\n        res.status(401).json({ error: 'Invalid token' });\n    }\n};\n```\n\n### 3. src/controllers/apiController.js\n```javascript\n// Main API controller\nconst express = require('express');\nconst router = express.Router();\nconst auth = require('../middleware/auth');\n\nrouter.get('/protected', auth, (req, res) => {\n    res.json({ message: 'Protected route accessed' });\n});\n\nmodule.exports = router;\n```\n\n### 4. src/routes/api.js\n```javascript\n// API routes with security middleware\nconst express = require('express');\nconst router = express.Router();\nconst auth = require('../middleware/auth');\n\nconst apiController = require('../controllers/apiController');\n\nrouter.use('/api', auth, apiController);\n\nmodule.exports = router;\n```\n\n### 5. src/services/dataService.js\n```javascript\n// Service layer with data encryption\nconst crypto = require('crypto');\nconst config = require('../config/security');\n\nclass DataService {\n    encryptData(data) {\n        const cipher = crypto.createCipher('aes-256-cbc', config.encryptionKey);\n        let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');\n        encrypted += cipher.final('hex');\n        return encrypted;\n    }\n\n    decryptData(encryptedData) {\n        const decipher = crypto.createDecipher('aes-256-cbc', config.encryptionKey);\n        let decrypted = decipher.update(encryptedData, 'hex', 'utf8');\n        decrypted += decipher.final('utf8');\n        return JSON.parse(decrypted);\n    }\n}\n\nmodule.exports = new DataService();\n```\n\n### 6. src/utils/logger.js\n```javascript\n// Security logging utility\nconst winston = require('winston');\n\nconst logger = winston.createLogger({\n    level: 'info',\n    format: winston.format.combine(\n        winston.format.timestamp(),\n        winston.format.json()\n    ),\n    transports: [\n        new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),\n        new winston.transports.File({ filename: 'logs/combined.log' })\n    ]\n});\n\nif (process.env.NODE_ENV !== 'production') {\n    logger.add(new winston.transports.Console({\n        format: winston.format.simple()\n    }));\n}\n\nmodule.exports = logger;\n```\n\n## Dependencies\n```json\n{\n    \"dependencies\": {\n        \"express\": \"^4.17.1\",\n        \"jsonwebtoken\": \"^8.5.1\",\n        \"bcryptjs\": \"^2.4.3\",\n        \"helmet\": \"^4.6.0\",\n        \"cors\": \"^2.8.5\",\n        \"winston\": \"^3.3.3\",\n        \"crypto\": \"^1.0.1\"\n    },\n    \"devDependencies\": {\n        \"jest\": \"^27.0.6\",\n        \"supertest\": \"^6.1.3\"\n    }\n}\n```\n\n## Security Considerations\n1. Implement proper JWT token validation\n2. Use secure password hashing with bcrypt\n3. Enable CORS with proper configuration\n4. Implement rate limiting\n5. Use security headers with helmet\n6. Encrypt sensitive data\n7. Implement proper error handling\n8. Use secure session management\n9. Validate all input data\n10. Implement proper logging\n\n## Best Practices\n1. Follow Node.js security best practices\n2. Use environment variables for sensitive data\n3. Implement proper error handling\n4. Use TypeScript for type safety\n5. Implement comprehensive testing\n6. Use proper logging\n7. Follow the principle of least privilege\n8. Implement proper session management\n9. Use secure communication protocols\n10. Regular security updates \n\n\nSECURITY REQUIREMENTS TEMPLATE:\nThe following security requirements MUST be implemented based on the specified security level (medium):\n# Node.js Security Implementation Template\n\n## Security Configuration\n```javascript\n// Security middleware configuration\nconst securityConfig = {\n    helmet: {\n        contentSecurityPolicy: {\n            directives: {\n                defaultSrc: [\"'self'\"],\n                scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n                styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n                imgSrc: [\"'self'\", \"data:\", \"https:\"],\n                connectSrc: [\"'self'\"]\n            }\n        }\n    },\n    rateLimit: {\n        windowMs: 15 * 60 * 1000, // 15 minutes\n        max: 100 // limit each IP to 100 requests per windowMs\n    },\n    cors: {\n        origin: process.env.ALLOWED_ORIGINS?.split(',') || [],\n        methods: ['GET', 'POST', 'PUT', 'DELETE'],\n        credentials: true\n    }\n};\n```\n\n## Authentication Implementation\n```javascript\n// JWT Authentication\nconst jwtConfig = {\n    secret: process.env.JWT_SECRET,\n    expiresIn: '1h',\n    algorithm: 'HS256'\n};\n\n// Password hashing\nconst hashPassword = async (password) => {\n    const salt = await bcrypt.genSalt(10);\n    return bcrypt.hash(password, salt);\n};\n```\n\n## Input Validation\n```javascript\n// Input validation schema\nconst userSchema = Joi.object({\n    username: Joi.string().alphanum().min(3).max(30).required(),\n    password: Joi.string().pattern(new RegExp('^[a-zA-Z0-9]{3,30}$')).required(),\n    email: Joi.string().email().required()\n});\n```\n\n## Error Handling\n```javascript\n// Error handling middleware\nconst errorHandler = (err, req, res, next) => {\n    logger.error(err.stack);\n    \n    if (err instanceof ValidationError) {\n        return res.status(400).json({\n            error: 'Validation Error',\n            details: err.details\n        });\n    }\n    \n    if (err instanceof AuthenticationError) {\n        return res.status(401).json({\n            error: 'Authentication Error',\n            message: err.message\n        });\n    }\n    \n    res.status(500).json({\n        error: 'Internal Server Error',\n        message: 'An unexpected error occurred'\n    });\n};\n```\n\n\n\n\nIMPLEMENTATION GUIDELINES:\n1. Use the PROJECT STRUCTURE TEMPLATE as your guide for organizing all code files\n2. Implement ALL the SECURITY REQUIREMENTS appropriate for the specified security level\n3. Include comprehensive error handling, logging, and exception management\n4. Add detailed comments explaining complex logic and important decisions\n5. Implement unit tests for critical functionality\n6. Follow best practices for the specified language and framework\n7. Use modern, clean coding patterns with proper separation of concerns\n\nIMPORTANT: Do NOT just provide implementation instructions or placeholder comments. \nI need COMPLETE, WORKING code with full implementations that can be saved and run.\n\nFILE FORMAT REQUIREMENTS:\nFor each file, provide a clear file path followed by the code content in this format:\n\n```\nFile: src/path/to/filename.extension\n```\n\n```node\n// Full file content here\n```\n\nEnsure each filename is a valid path (e.g., src/components/Auth.tsx) and includes the appropriate extension. \nDo not use descriptions as filenames. Each filename should be a specific path that can be used directly in a filesystem.\n\nIMPORTANT: Provide actual, complete, functional code in all files. Do not include placeholder comments or TODO statements.\n\nIMPLEMENTATION CONSTRAINTS:\n1. Follow the highest security standards based on security level (medium)\n2. Implement appropriate data protection based on sensitivity (internal)\n3. Use proper authentication method (jwt)",
  "parameters": {
    "securityLevel": "medium",
    "authMethod": "jwt",
    "dataSensitivity": "internal"
  },
  "taskDetails": {
    "summary": "P360 sample business requirement task",
    "description": "Create a order management API where itBackground\n\nThe customer service team currently receives feedback through a web form, but has no automated way to be notified when urgent issues are reported. Team members must regularly check the system, causing delays in addressing time-sensitive customer concerns.\n\nh2. Business Requirement\n\nCreate a notification system that alerts the appropriate customer service team member when customer feedback requiring immediate attention is submitted.\n\nh2. Key Features\n\n# Automatically analyze incoming feedback for urgent keywords or negative sentiment\n# Route notifications to the appropriate team member based on the feedback category\n# Allow team members to acknowledge receipt of notifications\n# Provide a simple dashboard showing pending and acknowledged urgent feedback\n\nh2. Success Criteria\n\n* Urgent feedback notifications are sent within 2 minutes of submission\n* Team members acknowledge receipt of 95% of urgent notifications within 15 minutes during business hours\n* Customer satisfaction for urgent issues improves by 10% within three months is fetching ",
    "status": "To Do",
    "priority": "Medium"
  }
}