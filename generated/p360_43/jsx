import OrderController from '../src/components/OrderController';
import OrderService from '../src/services/OrderService';

jest.mock('../src/services/OrderService');

describe('OrderController', () => {
  it('should create an order', async () => {
    const req = {
      body: {
        customerId: 'customer123',
        items: [
          { productId: 'product1', quantity: 2 },
          { productId: 'product2', quantity: 1 }
        ]
      },
      user: { userId: 'user123' }
    };
    const res = {
      status: jest.fn().mockReturnThis(),
      json: jest.fn()
    };
    
    const order = { id: 'order123', customerId: 'customer123', status: 'PENDING' };
    OrderService.createOrder.mockResolvedValue(order);
    
    await OrderController.createOrder(req, res);
    
    expect(OrderService.createOrder).toHaveBeenCalledWith('customer123', req.body.items);
    expect(res.status).toHaveBeenCalledWith(201);
    expect(res.json).toHaveBeenCalledWith(order);
  });
  
  // More test cases...
});
