{
  "type": "code",
  "timestamp": "2025-04-15T22:34:05.535Z",
  "taskId": "P360-43",
  "language": "node",
  "prompt": {
    "system": "You are a code generation assistant. Generate code for a node project following this structure:\n\n# Node.js Project Structure Template\n\n## Project Structure\n```\nproject/\n├── src/\n│   ├── controllers/         # API controllers\n│   │   ├── authController.js\n│   │   ├── userController.js\n│   │   └── apiController.js\n│   ├── models/             # Data models\n│   │   ├── user.js\n│   │   └── index.js\n│   ├── routes/             # API routes\n│   │   ├── auth.js\n│   │   ├── user.js\n│   │   └── index.js\n│   ├── services/           # Business logic\n│   │   ├── authService.js\n│   │   ├── userService.js\n│   │   └── dataService.js\n│   ├── middleware/         # Custom middleware\n│   │   ├── auth.js\n│   │   ├── error.js\n│   │   └── validation.js\n│   ├── config/             # Configuration files\n│   │   ├── security.js\n│   │   ├── database.js\n│   │   └── index.js\n│   ├── utils/              # Utility functions\n│   │   ├── logger.js\n│   │   ├── validator.js\n│   │   └── encryption.js\n│   └── index.js            # Application entry point\n├── tests/                  # Test files\n│   ├── controllers/\n│   ├── services/\n│   └── utils/\n├── package.json            # Project dependencies\n└── README.md              # Project documentation\n```\n\n## Required Files\n\n### 1. src/config/security.js\n```javascript\n// Security configuration\nmodule.exports = {\n    jwtSecret: process.env.JWT_SECRET,\n    jwtExpiration: '1h',\n    bcryptSaltRounds: 10,\n    corsOptions: {\n        origin: process.env.ALLOWED_ORIGINS,\n        methods: ['GET', 'POST', 'PUT', 'DELETE'],\n        allowedHeaders: ['Content-Type', 'Authorization']\n    }\n};\n```\n\n### 2. src/middleware/auth.js\n```javascript\n// JWT authentication middleware\nconst jwt = require('jsonwebtoken');\nconst config = require('../config/security');\n\nmodule.exports = (req, res, next) => {\n    const token = req.headers.authorization?.split(' ')[1];\n    if (!token) return res.status(401).json({ error: 'No token provided' });\n\n    try {\n        const decoded = jwt.verify(token, config.jwtSecret);\n        req.user = decoded;\n        next();\n    } catch (error) {\n        res.status(401).json({ error: 'Invalid token' });\n    }\n};\n```\n\n### 3. src/controllers/apiController.js\n```javascript\n// Main API controller\nconst express = require('express');\nconst router = express.Router();\nconst auth = require('../middleware/auth');\n\nrouter.get('/protected', auth, (req, res) => {\n    res.json({ message: 'Protected route accessed' });\n});\n\nmodule.exports = router;\n```\n\n### 4. src/routes/api.js\n```javascript\n// API routes with security middleware\nconst express = require('express');\nconst router = express.Router();\nconst auth = require('../middleware/auth');\n\nconst apiController = require('../controllers/apiController');\n\nrouter.use('/api', auth, apiController);\n\nmodule.exports = router;\n```\n\n### 5. src/services/dataService.js\n```javascript\n// Service layer with data encryption\nconst crypto = require('crypto');\nconst config = require('../config/security');\n\nclass DataService {\n    encryptData(data) {\n        const cipher = crypto.createCipher('aes-256-cbc', config.encryptionKey);\n        let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');\n        encrypted += cipher.final('hex');\n        return encrypted;\n    }\n\n    decryptData(encryptedData) {\n        const decipher = crypto.createDecipher('aes-256-cbc', config.encryptionKey);\n        let decrypted = decipher.update(encryptedData, 'hex', 'utf8');\n        decrypted += decipher.final('utf8');\n        return JSON.parse(decrypted);\n    }\n}\n\nmodule.exports = new DataService();\n```\n\n### 6. src/utils/logger.js\n```javascript\n// Security logging utility\nconst winston = require('winston');\n\nconst logger = winston.createLogger({\n    level: 'info',\n    format: winston.format.combine(\n        winston.format.timestamp(),\n        winston.format.json()\n    ),\n    transports: [\n        new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),\n        new winston.transports.File({ filename: 'logs/combined.log' })\n    ]\n});\n\nif (process.env.NODE_ENV !== 'production') {\n    logger.add(new winston.transports.Console({\n        format: winston.format.simple()\n    }));\n}\n\nmodule.exports = logger;\n```\n\n## Dependencies\n```json\n{\n    \"dependencies\": {\n        \"express\": \"^4.17.1\",\n        \"jsonwebtoken\": \"^8.5.1\",\n        \"bcryptjs\": \"^2.4.3\",\n        \"helmet\": \"^4.6.0\",\n        \"cors\": \"^2.8.5\",\n        \"winston\": \"^3.3.3\",\n        \"crypto\": \"^1.0.1\"\n    },\n    \"devDependencies\": {\n        \"jest\": \"^27.0.6\",\n        \"supertest\": \"^6.1.3\"\n    }\n}\n```\n\n## Security Considerations\n1. Implement proper JWT token validation\n2. Use secure password hashing with bcrypt\n3. Enable CORS with proper configuration\n4. Implement rate limiting\n5. Use security headers with helmet\n6. Encrypt sensitive data\n7. Implement proper error handling\n8. Use secure session management\n9. Validate all input data\n10. Implement proper logging\n\n## Best Practices\n1. Follow Node.js security best practices\n2. Use environment variables for sensitive data\n3. Implement proper error handling\n4. Use TypeScript for type safety\n5. Implement comprehensive testing\n6. Use proper logging\n7. Follow the principle of least privilege\n8. Implement proper session management\n9. Use secure communication protocols\n10. Regular security updates \n\nIMPORTANT: You MUST follow these rules exactly:\n1. Follow directory structure exactly\n2. Include config files (pom.xml/package.json)\n3. Java: all code under src/main/java/com/company\n4. Node/React: all code under src/\n5. Format each file EXACTLY as shown below:\n\n===FILE_START===\npath/to/file.ext\n===CONTENT_START===\n// Your code here\n===CONTENT_END===\n===FILE_END===\n\nDO NOT use markdown code blocks (```). Use the exact format above for each file.\nYou must generate at least one file. Each file must follow the format above exactly.\n\nTask Details:\n- ID: P360-43\n- Summary: P360 sample business requirement task\n- Description: Create a order management API where itBackground\n\nThe customer service team currently receives feedback through a web form, but has no automated way to be notified when urgent issues are reported. Team members must regularly check the system, causing delays in addressing time-sensitive customer concerns.\n\nh2. Business Requirement\n\nCreate a notification system that alerts the appropriate customer service team member when customer feedback requiring immediate attention is submitted.\n\nh2. Key Features\n\n# Automatically analyze incoming feedback for urgent keywords or negative sentiment\n# Route notifications to the appropriate team member based on the feedback category\n# Allow team members to acknowledge receipt of notifications\n# Provide a simple dashboard showing pending and acknowledged urgent feedback\n\nh2. Success Criteria\n\n* Urgent feedback notifications are sent within 2 minutes of submission\n* Team members acknowledge receipt of 95% of urgent notifications within 15 minutes during business hours\n* Customer satisfaction for urgent issues improves by 10% within three months is fetching \n- Status: To Do\n- Priority: Medium\n\nLanguage: node\nSecurity: medium\nAuth: jwt\nData: internal\n\nREADME.md Requirements:\nYou MUST generate a README.md file with the following structure:\n\n===FILE_START===\nREADME.md\n===CONTENT_START===\n# Project Name\n\n## Business Requirements\n### Task Overview\n- **Task ID**: P360-43\n- **Priority**: Medium\n- **Status**: To Do\n\n### Requirements\nCreate a order management API where itBackground\n\nThe customer service team currently receives feedback through a web form, but has no automated way to be notified when urgent issues are reported. Team members must regularly check the system, causing delays in addressing time-sensitive customer concerns.\n\nh2. Business Requirement\n\nCreate a notification system that alerts the appropriate customer service team member when customer feedback requiring immediate attention is submitted.\n\nh2. Key Features\n\n# Automatically analyze incoming feedback for urgent keywords or negative sentiment\n# Route notifications to the appropriate team member based on the feedback category\n# Allow team members to acknowledge receipt of notifications\n# Provide a simple dashboard showing pending and acknowledged urgent feedback\n\nh2. Success Criteria\n\n* Urgent feedback notifications are sent within 2 minutes of submission\n* Team members acknowledge receipt of 95% of urgent notifications within 15 minutes during business hours\n* Customer satisfaction for urgent issues improves by 10% within three months is fetching \n\n### Key Features\n[List the key features derived from the task description]\n\n### Success Criteria\n[List the success criteria based on the task requirements]\n\n## Overview\n[Provide a clear description of the project's purpose, key features, and target audience]\n\n## Technical Stack\n- Programming Language: node\n- Frameworks: [List key frameworks]\n- Database: [Specify database if applicable]\n- External Services: [List integrated services]\n\n## Architecture\n[Describe the high-level system architecture, key components, and data flow]\n\n## Setup and Installation\n### Prerequisites\n- [List required software and versions]\n- [List required accounts and credentials]\n\n### Installation Steps\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n### Configuration\n- [List configuration requirements]\n- [Environment variables]\n- [Security settings]\n\n## Development\n### Building the Project\n```bash\n[Build commands]\n```\n\n### Running the Project\n```bash\n[Run commands]\n```\n\n### Testing\n[Testing instructions and commands]\n\n## Deployment\n### Prerequisites\n- [Deployment requirements]\n- [Server specifications]\n\n### Deployment Steps\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n## Security\n### Authentication\n[Authentication methods and setup]\n\n### Authorization\n[Authorization rules and roles]\n\n### Data Protection\n[Data security measures]\n\n## API Documentation\n### Endpoints\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| [endpoint] | [method] | [description] |\n\n### Request/Response Format\n[Example request/response format]\n\n## Troubleshooting\n### Common Issues\n- [Issue 1]: [Solution]\n- [Issue 2]: [Solution]\n\n### Debugging\n[Debugging tips and tools]\n\n## License\n[License information]\n\n## Contact\n[Contact information]\n===CONTENT_END===\n===FILE_END===\n\nIMPORTANT: The README.md MUST be generated as the first file and MUST follow this exact structure. Fill in all sections with relevant information based on the task details and requirements.",
    "messages": [
      {
        "role": "system",
        "content": "You are a code generation assistant. Generate code for a node project following this structure:\n\n# Node.js Project Structure Template\n\n## Project Structure\n```\nproject/\n├── src/\n│   ├── controllers/         # API controllers\n│   │   ├── authController.js\n│   │   ├── userController.js\n│   │   └── apiController.js\n│   ├── models/             # Data models\n│   │   ├── user.js\n│   │   └── index.js\n│   ├── routes/             # API routes\n│   │   ├── auth.js\n│   │   ├── user.js\n│   │   └── index.js\n│   ├── services/           # Business logic\n│   │   ├── authService.js\n│   │   ├── userService.js\n│   │   └── dataService.js\n│   ├── middleware/         # Custom middleware\n│   │   ├── auth.js\n│   │   ├── error.js\n│   │   └── validation.js\n│   ├── config/             # Configuration files\n│   │   ├── security.js\n│   │   ├── database.js\n│   │   └── index.js\n│   ├── utils/              # Utility functions\n│   │   ├── logger.js\n│   │   ├── validator.js\n│   │   └── encryption.js\n│   └── index.js            # Application entry point\n├── tests/                  # Test files\n│   ├── controllers/\n│   ├── services/\n│   └── utils/\n├── package.json            # Project dependencies\n└── README.md              # Project documentation\n```\n\n## Required Files\n\n### 1. src/config/security.js\n```javascript\n// Security configuration\nmodule.exports = {\n    jwtSecret: process.env.JWT_SECRET,\n    jwtExpiration: '1h',\n    bcryptSaltRounds: 10,\n    corsOptions: {\n        origin: process.env.ALLOWED_ORIGINS,\n        methods: ['GET', 'POST', 'PUT', 'DELETE'],\n        allowedHeaders: ['Content-Type', 'Authorization']\n    }\n};\n```\n\n### 2. src/middleware/auth.js\n```javascript\n// JWT authentication middleware\nconst jwt = require('jsonwebtoken');\nconst config = require('../config/security');\n\nmodule.exports = (req, res, next) => {\n    const token = req.headers.authorization?.split(' ')[1];\n    if (!token) return res.status(401).json({ error: 'No token provided' });\n\n    try {\n        const decoded = jwt.verify(token, config.jwtSecret);\n        req.user = decoded;\n        next();\n    } catch (error) {\n        res.status(401).json({ error: 'Invalid token' });\n    }\n};\n```\n\n### 3. src/controllers/apiController.js\n```javascript\n// Main API controller\nconst express = require('express');\nconst router = express.Router();\nconst auth = require('../middleware/auth');\n\nrouter.get('/protected', auth, (req, res) => {\n    res.json({ message: 'Protected route accessed' });\n});\n\nmodule.exports = router;\n```\n\n### 4. src/routes/api.js\n```javascript\n// API routes with security middleware\nconst express = require('express');\nconst router = express.Router();\nconst auth = require('../middleware/auth');\n\nconst apiController = require('../controllers/apiController');\n\nrouter.use('/api', auth, apiController);\n\nmodule.exports = router;\n```\n\n### 5. src/services/dataService.js\n```javascript\n// Service layer with data encryption\nconst crypto = require('crypto');\nconst config = require('../config/security');\n\nclass DataService {\n    encryptData(data) {\n        const cipher = crypto.createCipher('aes-256-cbc', config.encryptionKey);\n        let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');\n        encrypted += cipher.final('hex');\n        return encrypted;\n    }\n\n    decryptData(encryptedData) {\n        const decipher = crypto.createDecipher('aes-256-cbc', config.encryptionKey);\n        let decrypted = decipher.update(encryptedData, 'hex', 'utf8');\n        decrypted += decipher.final('utf8');\n        return JSON.parse(decrypted);\n    }\n}\n\nmodule.exports = new DataService();\n```\n\n### 6. src/utils/logger.js\n```javascript\n// Security logging utility\nconst winston = require('winston');\n\nconst logger = winston.createLogger({\n    level: 'info',\n    format: winston.format.combine(\n        winston.format.timestamp(),\n        winston.format.json()\n    ),\n    transports: [\n        new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),\n        new winston.transports.File({ filename: 'logs/combined.log' })\n    ]\n});\n\nif (process.env.NODE_ENV !== 'production') {\n    logger.add(new winston.transports.Console({\n        format: winston.format.simple()\n    }));\n}\n\nmodule.exports = logger;\n```\n\n## Dependencies\n```json\n{\n    \"dependencies\": {\n        \"express\": \"^4.17.1\",\n        \"jsonwebtoken\": \"^8.5.1\",\n        \"bcryptjs\": \"^2.4.3\",\n        \"helmet\": \"^4.6.0\",\n        \"cors\": \"^2.8.5\",\n        \"winston\": \"^3.3.3\",\n        \"crypto\": \"^1.0.1\"\n    },\n    \"devDependencies\": {\n        \"jest\": \"^27.0.6\",\n        \"supertest\": \"^6.1.3\"\n    }\n}\n```\n\n## Security Considerations\n1. Implement proper JWT token validation\n2. Use secure password hashing with bcrypt\n3. Enable CORS with proper configuration\n4. Implement rate limiting\n5. Use security headers with helmet\n6. Encrypt sensitive data\n7. Implement proper error handling\n8. Use secure session management\n9. Validate all input data\n10. Implement proper logging\n\n## Best Practices\n1. Follow Node.js security best practices\n2. Use environment variables for sensitive data\n3. Implement proper error handling\n4. Use TypeScript for type safety\n5. Implement comprehensive testing\n6. Use proper logging\n7. Follow the principle of least privilege\n8. Implement proper session management\n9. Use secure communication protocols\n10. Regular security updates \n\nIMPORTANT: You MUST follow these rules exactly:\n1. Follow directory structure exactly\n2. Include config files (pom.xml/package.json)\n3. Java: all code under src/main/java/com/company\n4. Node/React: all code under src/\n5. Format each file EXACTLY as shown below:\n\n===FILE_START===\npath/to/file.ext\n===CONTENT_START===\n// Your code here\n===CONTENT_END===\n===FILE_END===\n\nDO NOT use markdown code blocks (```). Use the exact format above for each file.\nYou must generate at least one file. Each file must follow the format above exactly.\n\nTask Details:\n- ID: P360-43\n- Summary: P360 sample business requirement task\n- Description: Create a order management API where itBackground\n\nThe customer service team currently receives feedback through a web form, but has no automated way to be notified when urgent issues are reported. Team members must regularly check the system, causing delays in addressing time-sensitive customer concerns.\n\nh2. Business Requirement\n\nCreate a notification system that alerts the appropriate customer service team member when customer feedback requiring immediate attention is submitted.\n\nh2. Key Features\n\n# Automatically analyze incoming feedback for urgent keywords or negative sentiment\n# Route notifications to the appropriate team member based on the feedback category\n# Allow team members to acknowledge receipt of notifications\n# Provide a simple dashboard showing pending and acknowledged urgent feedback\n\nh2. Success Criteria\n\n* Urgent feedback notifications are sent within 2 minutes of submission\n* Team members acknowledge receipt of 95% of urgent notifications within 15 minutes during business hours\n* Customer satisfaction for urgent issues improves by 10% within three months is fetching \n- Status: To Do\n- Priority: Medium\n\nLanguage: node\nSecurity: medium\nAuth: jwt\nData: internal\n\nREADME.md Requirements:\nYou MUST generate a README.md file with the following structure:\n\n===FILE_START===\nREADME.md\n===CONTENT_START===\n# Project Name\n\n## Business Requirements\n### Task Overview\n- **Task ID**: P360-43\n- **Priority**: Medium\n- **Status**: To Do\n\n### Requirements\nCreate a order management API where itBackground\n\nThe customer service team currently receives feedback through a web form, but has no automated way to be notified when urgent issues are reported. Team members must regularly check the system, causing delays in addressing time-sensitive customer concerns.\n\nh2. Business Requirement\n\nCreate a notification system that alerts the appropriate customer service team member when customer feedback requiring immediate attention is submitted.\n\nh2. Key Features\n\n# Automatically analyze incoming feedback for urgent keywords or negative sentiment\n# Route notifications to the appropriate team member based on the feedback category\n# Allow team members to acknowledge receipt of notifications\n# Provide a simple dashboard showing pending and acknowledged urgent feedback\n\nh2. Success Criteria\n\n* Urgent feedback notifications are sent within 2 minutes of submission\n* Team members acknowledge receipt of 95% of urgent notifications within 15 minutes during business hours\n* Customer satisfaction for urgent issues improves by 10% within three months is fetching \n\n### Key Features\n[List the key features derived from the task description]\n\n### Success Criteria\n[List the success criteria based on the task requirements]\n\n## Overview\n[Provide a clear description of the project's purpose, key features, and target audience]\n\n## Technical Stack\n- Programming Language: node\n- Frameworks: [List key frameworks]\n- Database: [Specify database if applicable]\n- External Services: [List integrated services]\n\n## Architecture\n[Describe the high-level system architecture, key components, and data flow]\n\n## Setup and Installation\n### Prerequisites\n- [List required software and versions]\n- [List required accounts and credentials]\n\n### Installation Steps\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n### Configuration\n- [List configuration requirements]\n- [Environment variables]\n- [Security settings]\n\n## Development\n### Building the Project\n```bash\n[Build commands]\n```\n\n### Running the Project\n```bash\n[Run commands]\n```\n\n### Testing\n[Testing instructions and commands]\n\n## Deployment\n### Prerequisites\n- [Deployment requirements]\n- [Server specifications]\n\n### Deployment Steps\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n## Security\n### Authentication\n[Authentication methods and setup]\n\n### Authorization\n[Authorization rules and roles]\n\n### Data Protection\n[Data security measures]\n\n## API Documentation\n### Endpoints\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| [endpoint] | [method] | [description] |\n\n### Request/Response Format\n[Example request/response format]\n\n## Troubleshooting\n### Common Issues\n- [Issue 1]: [Solution]\n- [Issue 2]: [Solution]\n\n### Debugging\n[Debugging tips and tools]\n\n## License\n[License information]\n\n## Contact\n[Contact information]\n===CONTENT_END===\n===FILE_END===\n\nIMPORTANT: The README.md MUST be generated as the first file and MUST follow this exact structure. Fill in all sections with relevant information based on the task details and requirements."
      }
    ]
  },
  "parameters": {
    "securityLevel": "medium",
    "authMethod": "jwt",
    "dataSensitivity": "internal"
  },
  "generatedFiles": [
    "p360/p360_43/node/README.md",
    "p360/p360_43/node/src/config/security.js",
    "p360/p360_43/node/src/middleware/auth.js",
    "p360/p360_43/node/src/controllers/apiController.js",
    "p360/p360_43/node/src/routes/api.js",
    "p360/p360_43/node/src/services/dataService.js",
    "p360/p360_43/node/src/utils/logger.js",
    "p360/p360_43/node/package.json"
  ]
}